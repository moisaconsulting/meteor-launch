{"version":3,"sources":["../src/google.js"],"names":["uploadAPK","env","channel","Promise","resolve","util","hasPlatform","console","log","channels","test","some","el","stdio"],"mappings":";;;;;;AAAA;;AACA;;;;;;AAEA,IAAMA,YAAY,SAAZA,SAAY,CAACC,GAAD,EAAMC,OAAN;AAAA,SAChB,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAa;AACvB,QAAI,CAACC,eAAKC,WAAL,CAAiB,SAAjB,CAAL,EAAkC;AAChCC,cAAQC,GAAR,CAAY,6CAAZ;AACA,aAAOJ,QAAQ,SAAR,CAAP;AACD;;AAED,QAAMK,WAAW,CAAC,OAAD,EAAU,MAAV,EAAkB,YAAlB,EAAgC,SAAhC,EAA2C,UAA3C,CAAjB;;AAEA,QAAMC,OAAOD,SAASE,IAAT,CAAc,UAAUC,EAAV,EAAc;AACvC,aAAOA,OAAOV,OAAd;AACD,KAFY,CAAb;;AAIA,QAAI,CAACQ,IAAL,EAAWR,UAAU,OAAV;;AAEXK,YAAQC,GAAR,uBAAgCN,OAAhC;;AAEA,uEAA6CA,OAA7C,EAAwD;AACtDW,aAAO,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAD+C;AAEtDZ;AAFsD,KAAxD;;AAKA,WAAOG,QAAQ,UAAR,CAAP;AACD,GAtBD,CADgB;AAAA,CAAlB;;kBA0Be;AACbJ;AADa,C","file":"google.js","sourcesContent":["import { execSync } from \"child_process\";\nimport util from \"./util\";\n\nconst uploadAPK = (env, channel) => (\n  new Promise((resolve) => {\n    if (!util.hasPlatform(\"android\")) {\n      console.log(\"Skipping APK upload to Google Play Store...\");\n      return resolve(\"skipped\");\n    }\n\n    const channels = ['alpha', 'beta', 'production', 'rollout', 'internal'];\n\n    const test = channels.some(function (el) {\n      return el === channel;\n    });\n\n    if (!test) channel = 'alpha';\n\n    console.log(`Uploading APK to ${channel}...`);\n\n    execSync(`fastlane android playstore track:${channel}`, {\n      stdio: [0, 1, 2],\n      env,\n    });\n\n    return resolve(\"uploaded\");\n  })\n);\n\nexport default {\n  uploadAPK\n};"]}