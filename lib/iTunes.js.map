{"version":3,"sources":["../src/iTunes.js"],"names":["uploadTestFlight","Promise","resolve","util","hasPlatform","console","log","stdio","env","uploadAppStore","uploadAppStoreDesktop"],"mappings":";;;;;;AAAA;;AACA;;;;;;AAEA,IAAMA,mBAAmB,SAAnBA,gBAAmB;AAAA,SACvB,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAa;AACvB,QAAI,CAACC,eAAKC,WAAL,CAAiB,KAAjB,CAAL,EAA8B;AAC5BC,cAAQC,GAAR,CAAY,sCAAZ;AACA,aAAOJ,QAAQ,SAAR,CAAP;AACD;;AAEDG,YAAQC,GAAR,CAAY,gCAAZ;;AAEA,iCAAS,mBAAT,EAA8B;AAC5BC,aAAO,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CADqB;AAE5BC;AAF4B,KAA9B;;AAKA,WAAON,QAAQ,UAAR,CAAP;AACD,GAdD,CADuB;AAAA,CAAzB;;AAkBA,IAAMO,iBAAiB,SAAjBA,cAAiB;AAAA,SACrB,IAAIR,OAAJ,CAAY,UAACC,OAAD,EAAa;AACvB,QAAI,CAACC,eAAKC,WAAL,CAAiB,KAAjB,CAAL,EAA8B;AAC5BC,cAAQC,GAAR,CAAY,kCAAZ;AACA,aAAOJ,QAAQ,SAAR,CAAP;AACD;;AAEDG,YAAQC,GAAR,CAAY,wBAAZ;;AAEA,iCAAS,qBAAT,EAAgC;AAC9BC,aAAO,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CADuB;AAE9BC;AAF8B,KAAhC;;AAKA,WAAON,QAAQ,UAAR,CAAP;AACD,GAdD,CADqB;AAAA,CAAvB;;AAkBA,IAAMQ,wBAAwB,SAAxBA,qBAAwB;AAAA,SAC5B,IAAIT,OAAJ,CAAY,UAACC,OAAD,EAAa;AACvBG,YAAQC,GAAR,CAAY,mCAAZ;;AAEA,iCAAS,+BAAT,EAA0C;AACxCC,aAAO,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CADiC;AAExCC;AAFwC,KAA1C;;AAKA,WAAON,QAAQ,UAAR,CAAP;AACD,GATD,CAD4B;AAAA,CAA9B;;kBAae;AACbF,oCADa;AAEbS,gCAFa;AAGbC;AAHa,C","file":"iTunes.js","sourcesContent":["import { execSync } from \"child_process\";\nimport util from \"./util\";\n\nconst uploadTestFlight = env => (\n  new Promise((resolve) => {\n    if (!util.hasPlatform(\"ios\")) {\n      console.log(\"Skipping iOS upload to TestFlight...\");\n      return resolve(\"skipped\");\n    }\n\n    console.log(\"Uploading iOS to TestFlight...\");\n\n    execSync(\"fastlane ios beta\", {\n      stdio: [0, 1, 2],\n      env,\n    });\n\n    return resolve(\"uploaded\");\n  })\n);\n\nconst uploadAppStore = env => (\n  new Promise((resolve) => {\n    if (!util.hasPlatform(\"ios\")) {\n      console.log(\"Skipping iOS upload to iTunes...\");\n      return resolve(\"skipped\");\n    }\n\n    console.log(\"Uploading to iTunes...\");\n\n    execSync(\"fastlane ios deploy\", {\n      stdio: [0, 1, 2],\n      env,\n    });\n\n    return resolve(\"uploaded\");\n  })\n);\n\nconst uploadAppStoreDesktop = env => (\n  new Promise((resolve) => {\n    console.log(\"Uploading to App store connect...\");\n\n    execSync(\"fastlane macos deploy_desktop\", {\n      stdio: [0, 1, 2],\n      env,\n    });\n\n    return resolve(\"uploaded\");\n  })\n);\n\nexport default {\n  uploadTestFlight,\n  uploadAppStore,\n  uploadAppStoreDesktop\n};\n"]}